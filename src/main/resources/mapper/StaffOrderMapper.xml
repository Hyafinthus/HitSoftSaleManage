<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hit.soft.dao.StaffOrderMapper">
	
	<insert id="createOrder" parameterType="Order">
		INSERT INTO order_table( order_id, create_time, client_id)
		 VALUES(0, #{staff_name}, #{role}, #{pass}, 0)
	</insert>
	
	<insert id="createOrderProduct" parameterType="OrderProduct">
		INSERT INTO staff_table VALUES(0,#{staff_name},#{role},#{pass},0)
	</insert>
	
	<select id="searchClient" resultType="Client">
		SELECT client_id, client_name, sex, phone, address, points FROM client_table
		WHERE wholesale_client = 1
	</select>
	
	<select id="searchProduct" resultType="Product">
		SELECT product_id, product_name, type, unit, purchase_price, wholesale_price FROM product_table
	</select>
	
	<select id="searchUnpaidOrder" resultType="Order">
		SELECT order_id, create_name, client_id, order_sale_price, order_purchase_price FROM order_table
		WHERE state = "approved"
	</select>
	
	<select id="searchPaidOrder" resultType="Order">
		SELECT order_id, create_name, pay_time, client_id, order_sale_price, order_purchase_price FROM order_table
		WHERE state = "paid" and wholesale_order = 1
	</select>
	
	<select id="searchOrder" resultType="Order" parameterType="Integer">
		SELECT order_id, create_name, pay_time, return_time, client_id, order_sale_price,
		 order_purchase_price, order_profit, state, wholesale_order FROM order_table
	</select>
	
	<update id="updateOrder" parameterType="Order">
		UPDATE order_table
		SET create_time = #{create_time}, pay_time = #{pay_time}, return_time = #{return_time},
		order_sale_price = #{order_sale_price}, order_purchase_price = #{order_purchase_price},
		order_profit = #{order_profit}, state = #{state}
		WHERE order_id = #{order_id}
	</update>
	
</mapper>