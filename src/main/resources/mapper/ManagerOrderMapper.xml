<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hit.soft.dao.BossManageMapper">
	
	<select id="queryOrders" resultType="Order">
		SELECT order_id, create_datetime, client_id, order_sale_price, order_purchase_price, order_profit
		FROM order_table
	</select>
	
	<select id="showProducts" parameterType="String" resultMap="productsList">
		SELECT p.product_id, p.product_name, p.type, p.unit, p.purchase_price, p.wholesale_price, op.count
		FROM order_prod_table op, product_table p
		WHERE op.order_id = #{order_id} AND op.product_id = p.product_id
	</select>
	
	<resultMap type="Product" id="productsList">		
		<id column="product_id" property="product_id"/>
		<result column="product_name" property="product_name"/>
		<result column="type" property="type"/>
		<result column="unit" property="unit"/>
		<result column="purchase_price" property="purchase_price"/>
		<result column="wholesale_price" property="wholesale_price"/>
		<result column="count" property="count"/>
	</resultMap>
	
	<select id="showOrder" parameterType="String" resultType="OrderProduct">
		SELECT o.create_time, c.client_name
		FROM order_table o, client_table c
		WHERE o.order_id = #{order_id} AND o.client_id = c.client_id
	</select>
	
	<update id="approveOrder" parameterType="String">
		UPDATE order_table
		SET state = "approved"
		WHERE order_id = #{order_id}
	</update>
	
	<update id="rejectOrder" parameterType="String">
		UPDATE order_table
		SET state = "rejected"
		WHERE order_id = #{order_id}
	</update>
	
</mapper>